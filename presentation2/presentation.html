<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-touch-fullscreen" content="yes"/>
    <meta name="format-detection" content="email=no" />
    <meta name="wap-font-scale"  content="no" />
    <meta name="viewport" content="user-scalable=no, width=device-width" />
    <meta content="telephone=no" name="format-detection" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link href="https://src.axui.cn/v2.0/dist/css/ax.css" rel="stylesheet" type="text/css" >
    <link href="https://src.axui.cn/v2.0/dist/css/ax-response.css" rel="stylesheet" type="text/css" >

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Knowledge Graph System</title>
</head>
<body>
    <div class="container">
        <nav>
            <ul class="mcd-menu">
                <li>
                    <a href="#" class="active">
                        <i class="fa fa-text-width"></i>
                        <strong>è¾“å…¥æ–‡æœ¬</strong>
                        <small>è¾“å…¥æ‚¨çš„æ–‡æœ¬</small>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-tags"></i>
                        <strong>å®ä½“è¯†åˆ«</strong>
                        <small>è¯†åˆ«æ–‡æœ¬ä¸­çš„å®ä½“</small>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-link"></i>
                        <strong>å…³ç³»æŠ½å–</strong>
                        <small>æå–å®ä½“é—´çš„å…³ç³»</small>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-cube"></i>
                        <strong>çŸ¥è¯†å›¾è°±</strong>
                        <small>æŸ¥çœ‹3DçŸ¥è¯†å›¾è°±</small>
                    </a>
                </li>
            </ul>
            <div class="logo-container">
                <img src="logo.png" alt="Logo" class="nav-logo">
            </div>
        </nav>

    </div>

    <div class="content-area">
        <div id="input-text-content" class="content-section active">
            <!-- è¾“å…¥æ–‡æœ¬çš„å†…å®¹ -->
            <div class="ax-row">
                <div class="ax-col ax-col-12">
                    <section class="demo-section-border">
                        <div class="ax-card" id="input-card">
                            <div class="ax-card-header">
                                è¾“å…¥æ–‡æœ¬
                            </div>
                            <div class="ax-card-body">
                                <textarea id="inputText"></textarea>
                                <div class="ax-break"></div>
                                <a href="###" class="ax-btn ax-primary" onclick="process()" axRipple>ç¡®è®¤</a>
                            </div>
                        </div>
                    </section></div>
                <span class="ax-gutter"></span>
                <div class="ax-col ax-col-12">
                    <section class="demo-section-border">
                        <div class="ax-card" id="completion-card">
                            <div class="ax-card-header">
                                æ–‡æœ¬è¡¥å…¨
                            </div>
                            <div class="ax-card-body">
                                <div id="text-completion-result"></div>
                            </div>
                        </div>
                    </section></div>
            </div>

            <div class="ax-break"></div>

            <div class="ax-row">
                <div class="ax-col ax-col-24">
                    <section class="demo-section-border">
                        <div class="ax-card" id="state-card">
                            <div class="ax-card-header">
                                æ¨¡å—åŠŸèƒ½çŠ¶æ€
                            </div>
                            <div class="ax-card-body">
                                <span class="ax-dot ax-dark default-status state-completion"></span>
                                <span>æ–‡æœ¬è¡¥å…¨ï¼š</span>
                                <span>æœªè¿è¡Œ</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <span class="ax-dot ax-dark default-status state-entity"></span>
                                <span>å®ä½“è¯†åˆ«ï¼š</span>
                                <span>æœªè¿è¡Œ</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <span class="ax-dot ax-dark default-status state-link"></span>
                                <span>å…³ç³»æŠ½å–ï¼š</span>
                                <span>æœªè¿è¡Œ</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <span class="ax-dot ax-dark default-status state-gragh"></span>
                                <span>çŸ¥è¯†å›¾è°±ï¼š</span>
                                <span>æœªè¿è¡Œ</span>
                            </div>
                        </div>
                    </section></div>
            </div>
        </div>
        <div id="entity-recognition-content" class="content-section">
            <!-- å®ä½“è¯†åˆ«çš„å†…å®¹ -->
            <div class="ax-row">
                <div class="ax-col ax-col-16">
                    <section class="demo-section-border">
                        <div class="ax-card" id="named-card">
                            <div class="ax-card-header">
                                å®ä½“è¯†åˆ«ç»“æœ
                            </div>
                            <div class="ax-card-body">
                                <div id="entity-recognition-result"></div>
                            </div>
                        </div>
                    </section></div>
                <span class="ax-gutter"></span>
                <div class="ax-col ax-col-8">
                    <section class="demo-section-border">
                        <div class="ax-card" id="unnamed-card">
                            <div class="ax-card-header">
                                æ½œåœ¨å®ä½“è¯†åˆ«ç»“æœ
                            </div>
                            <div class="ax-card-body">
                                <div id="entity-recognition-result-unnamed"></div>
                            </div>
                        </div>
                    </section></div>
            </div>
        </div>
        <div id="relationship-extraction-content" class="content-section">
            <!-- å…³ç³»æŠ½å–çš„å†…å®¹ -->
            <div class="ax-row">
                <div class="ax-col ax-col-7">
                    <section class="demo-section-border">
                        <div class="ax-card" id="link-card">
                            <div class="ax-card-header">
                                æ­£å‘å…³ç³»
                            </div>
                            <div class="ax-card-body">
                                <div id="link-result"></div>
                            </div>
                        </div>
                    </section></div>
                <span class="ax-gutter"></span>
                <div class="ax-col ax-col-7">
                    <section class="demo-section-border">
                        <div class="ax-card" id="reverse-card">
                            <div class="ax-card-header">
                                åå‘å…³ç³»
                            </div>
                            <div class="ax-card-body">
                                <div id="reverse-result"></div>
                            </div>
                        </div>
                    </section></div>
                <span class="ax-gutter"></span>
                <div class="ax-col ax-col-10">
                    <section class="demo-section-border">
                        <div class="ax-card" id="extend-card">
                            <div class="ax-card-header">
                                è·¯å¾„æ¨ç†å…³ç³»
                            </div>
                            <div class="ax-card-body">
                                <div id="extend-result"></div>
                            </div>
                        </div>
                    </section></div>
            </div>
        </div>
        <div id="3d-graph-content" class="content-section">
            <!-- 3Då›¾è°±çš„å†…å®¹ -->
            <div class="ax-row">
                <div class="ax-col ax-col-22">
                    <input type="text" id="graph-search-input" placeholder="æœç´¢å®ä½“æˆ–å…³ç³»...">
                </div>
                <span class="ax-gutter"></span>
                <div class="ax-col ax-col-2">
                    <a href="###" class="ax-btn ax-line ax-primary ax-icon" onclick="searchGraph()"><span class="ax-iconfont ax-icon-search"></span></a>
                    <!-- <a href="###" class="ax-btn ax-ad" onclick="searchGraph()" axRipple>æœç´¢</a> -->
                    <a href="###" class="ax-btn ax-line ax-primary ax-icon" onclick="reset()"><span class="ax-iconfont ax-icon-refresh"></span></a>
                </div>


            </div>

            <div class="ax-break"></div>

            <div class="ax-row">
                <div class="ax-col ax-col-24">
                    <div id="graph-result"></div>
                </div>
            </div>

        </div>
    </div>



    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/3d-force-graph"></script>
    <script src="https://src.axui.cn/v2.0/dist/js/ax.min.js" type="text/javascript" charset="utf-8"></script>
    <script>
        let G_graghdata = null;
        let G_displaygraph = null;
        let G_text = null;
        // ä¿®æ”¹ä¸ºé»˜è®¤çŠ¶æ€
        function setDefaultStatus(taskName) {
            $(`.state-${taskName}`).removeClass("ax-ad ax-success").addClass("ax-dark");
            $(`.state-${taskName}`).next().next().text("æœªåŠ è½½");
        }

        // ä¿®æ”¹ä¸ºåŠ è½½çŠ¶æ€
        function setLoadingStatus(taskName) {
            $(`.state-${taskName}`).removeClass("ax-dark ax-success").addClass("ax-ad");
            $(`.state-${taskName}`).next().next().text("æ­£åœ¨åŠ è½½...");
        }

        // ä¿®æ”¹ä¸ºæˆåŠŸçŠ¶æ€
        function setSuccessStatus(taskName) {
            $(`.state-${taskName}`).removeClass("ax-dark ax-ad").addClass("ax-success");
            $(`.state-${taskName}`).next().next().text("åŠ è½½å®Œæˆ");
        }
        class searchTOOL{
            constructor (container_) {
                this.container = document.getElementById(container_);
            }
            updateGraphData(data) {
                let node = [{'id': 31, 'label': 'äººçš„ä»£ç§°', 'text': 'å‰¯ä¸»ä»»', 'start': 31, 'end': 34, 'probability': 0.9999125020626849, 'hasRelation': 1}, {'id': 34, 'label': 'äººå', 'text': 'é™ˆæ°¸é”‹', 'start': 34, 'end': 37, 'probability': 0.9999418267016154, 'hasRelation': 1}, {'id': 21, 'label': 'æ”¿åºœæœºæ„', 'text': 'åŸåŒºæ°´ç³»è”æ’è”è°ƒä¸­å¿ƒ', 'start': 21, 'end': 31, 'probability': 0.9986666021068302, 'hasRelation': 0}]
                let link = [{'source': 31, 'target': 21, 'sourceText': 'å‰¯ä¸»ä»»', 'sourceLabel': 'äººçš„ä»£ç§°', 'targetText': 'åŸåŒºæ°´ç³»è”æ’è”è°ƒä¸­å¿ƒ', 'targetLabel': 'æ”¿åºœæœºæ„', 'relation': 'éš¶å±'}, {'source': 34, 'target': 31, 'sourceText': 'é™ˆæ°¸é”‹', 'sourceLabel': 'äººå', 'targetText': 'å‰¯ä¸»ä»»', 'targetLabel': 'äººçš„ä»£ç§°', 'relation': 'èº«ä»½'}]
                let dataEx = {nodes : node , links : link};
                G_displaygraph.render(dataEx);
            }
            search() {
                const searchTerm = document.getElementById('graph-search-input').value.toLowerCase();
                if (!searchTerm) return;
                // æœç´¢å®ä½“å’Œå…³ç³»
                console.log("æœç´¢å®ä½“å’Œå…³ç³»");
                const matchedNodes = G_graghdata.nodes.filter(node =>
                    node.text.toLowerCase().includes(searchTerm) ||
                    node.label.toLowerCase().includes(searchTerm)
                );
                console.log("matchedNodes");
                const matchedLinks = G_graghdata.links.filter(link =>
                    link.sourceText.toLowerCase().includes(searchTerm) ||
                    link.targetText.toLowerCase().includes(searchTerm) ||
                    link.relation.toLowerCase().includes(searchTerm)
                );
                console.log("matchedLinks");
                // æ›´æ–°å›¾è°±æ•°æ®ä»¥åªæ˜¾ç¤ºåŒ¹é…çš„å®ä½“å’Œå…³ç³»
                console.log("æ›´æ–°å›¾è°±æ•°æ®ä»¥åªæ˜¾ç¤ºåŒ¹é…çš„å®ä½“å’Œå…³ç³»");
                this.updateGraphData({nodes : matchedNodes , links : matchedLinks});
            }
        }
        class displayENT {
            constructor (container_) {
                this.container = document.getElementById(container_);
            }

            renderEx(){
                var arr = ["Label","Text"];
                //åˆ›å»ºæ•°ç»„arrï¼Œç”¨æ¥æ˜¾ç¤ºthçš„æ ‡é¢˜
                var body = document.getElementById('entity-recognition-result-unnamed');
                body.innerHTML = '';
                //æŸ¥æ‰¾bodyç»“ç‚¹
                var table = document.createElement("table");
                table.className = "ax-table";
                table.setAttribute("stripe", "odd");
                //åˆ›å»ºtableç»“ç‚¹
                body.appendChild(table);
                //å‘bodyä¸­æ·»åŠ tableèŠ‚ç‚¹
                var thead = document.createElement("thead");
                //åˆ›å»ºtheadèŠ‚ç‚¹
                table.appendChild(thead);
                //æŠŠtheadèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹
                var trd = document.createElement("tr");
                //åˆ›å»ºtrèŠ‚ç‚¹
                thead.appendChild(trd);
                //å‘theadä¸­æ·»åŠ trèŠ‚ç‚¹
                for(let i = 0;i<arr.length;i++){    //éå†arræ•°ç»„ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡è·å–æ•°ç»„ä¸­çš„å…ƒç´ 
                    var th = document.createElement("th");
                    //åˆ›å»ºthèŠ‚ç‚¹
                    trd.appendChild(th);
                    //å‘trèŠ‚ç‚¹ä¸­æ·»åŠ thèŠ‚ç‚¹
                    var text = document.createTextNode(arr[i]);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    th.appendChild(text);
                    //æŠŠæ–‡æœ¬èŠ‚ç‚¹æ·»åŠ åˆ°thèŠ‚ç‚¹ä¸­
                }
                var tbody = document.createElement("tbody");
                //åˆ›å»ºtbodyèŠ‚ç‚¹
                table.appendChild(tbody);

                let links = [{sourceText:'æ²»ç†æ€æƒ³',targetText:'å¤šæ°´åˆä¸€ï¼Œç½‘å‚æ²³ä¸€ä½“åŒ–'}
                        ,{sourceText:'æä¾›æœåŠ¡',targetText:'ç»Ÿç­¹è´Ÿè´£åŸåŒºæ°´ç³»ç®¡ç†ä¸è°ƒåº¦æŒ‡æŒ¥'}]
                links.forEach(({ sourceText, relation, targetText}) => {
                    var tr = document.createElement("tr");
                    //åˆ›å»ºtrèŠ‚ç‚¹
                    tbody.appendChild(tr);

                    var td1 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td1);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(sourceText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td1.appendChild(text);

                    var td3 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td3);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(targetText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td3.appendChild(text);

                });
            }

            render(text, nodes, links, ents) {
                this.container.innerHTML = '';
                let offset = 0;
                nodes.forEach(({ label, start, end , hasRelation}) => {
                    const entity = text.slice(start, end);
                    const fragments = text.slice(offset, start).split('\n');
                    fragments.forEach((fragment, i) => {

                        this.container.appendChild(document.createTextNode(fragment));
                        if(fragments.length > 1 && i != fragments.length - 1) this.container.appendChild(document.createElement('br'));
                    });
                    if(ents.includes(label.toLowerCase())) {
                        const mark = document.createElement('mark');
                        mark.setAttribute('data-entity', label.toLowerCase());
                        mark.appendChild(document.createTextNode(entity));
                        this.container.appendChild(mark);
                    }
                    else {
                        this.container.appendChild(document.createTextNode(entity));
                    }
                    offset = end;
                });
                this.container.appendChild(document.createTextNode(text.slice(offset, text.length)));
                this.renderEx();
                //console.log(`%cğŸ’¥  HTML markup\n%c<div class="entities">${this.container.innerHTML}</div>`, 'font: bold 16px/2 arial, sans-serif', 'font: 13px/1.5 Consolas, "Andale Mono", Menlo, Monaco, Courier, monospace');
                if(typeof this.onRender === 'function') this.onRender();
            }
        }
        class displayLINK{
            constructor(container1_,container2_){
                this.container1 = container1_;
                this.container2 = container2_;
                this.relationshipMapping = {
                "å‘è¨€äºº": "è¢«...å‘è¨€",
                "å¼€ä¼šåœ°ç‚¹": "ä¸¾åŠ...çš„åœ°ç‚¹",
                "å‘å¸ƒå†…å®¹": "è¢«...å‘å¸ƒçš„å†…å®¹",
                "èº«ä»½": "çš„èº«ä»½",
                "éš¶å±": "æœ‰...çš„æˆå‘˜",
                "é’ˆå¯¹ç¾¤ä½“": "æ˜¯...é’ˆå¯¹çš„ç¾¤ä½“",
                "å‘å¸ƒå•ä½": "å‘å¸ƒ...çš„å•ä½"
                };
            }
            renderEx(){
                var arr = ["å®ä½“A","å…³ç³»","å®ä½“B"];
                //åˆ›å»ºæ•°ç»„arrï¼Œç”¨æ¥æ˜¾ç¤ºthçš„æ ‡é¢˜
                var body = document.getElementById('extend-result');
                body.innerHTML = '';
                //æŸ¥æ‰¾bodyç»“ç‚¹
                var table = document.createElement("table");
                table.className = "ax-table";
                table.setAttribute("stripe", "odd");
                //åˆ›å»ºtableç»“ç‚¹
                body.appendChild(table);
                //å‘bodyä¸­æ·»åŠ tableèŠ‚ç‚¹
                var thead = document.createElement("thead");
                //åˆ›å»ºtheadèŠ‚ç‚¹
                table.appendChild(thead);
                //æŠŠtheadèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹
                var trd = document.createElement("tr");
                //åˆ›å»ºtrèŠ‚ç‚¹
                thead.appendChild(trd);
                //å‘theadä¸­æ·»åŠ trèŠ‚ç‚¹
                for(let i = 0;i<arr.length;i++){    //éå†arræ•°ç»„ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡è·å–æ•°ç»„ä¸­çš„å…ƒç´ 
                    var th = document.createElement("th");
                    //åˆ›å»ºthèŠ‚ç‚¹
                    trd.appendChild(th);
                    //å‘trèŠ‚ç‚¹ä¸­æ·»åŠ thèŠ‚ç‚¹
                    var text = document.createTextNode(arr[i]);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    th.appendChild(text);
                    //æŠŠæ–‡æœ¬èŠ‚ç‚¹æ·»åŠ åˆ°thèŠ‚ç‚¹ä¸­
                }
                var tbody = document.createElement("tbody");
                //åˆ›å»ºtbodyèŠ‚ç‚¹
                table.appendChild(tbody);
                //æŠŠtbodyèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹ä¸­
                let links = [{sourceText:'ç‡•é›', relation:'å°±èŒäº',targetText:'æ–°åç¤¾'}
                        ,{sourceText:'é™ˆæ°¸é”‹', relation:'å°±èŒäº',targetText:'æ°´ç³»è”æ’è”è°ƒä¸­å¿ƒ'}]
                links.forEach(({ sourceText, relation, targetText}) => {
                    var tr = document.createElement("tr");
                    //åˆ›å»ºtrèŠ‚ç‚¹
                    tbody.appendChild(tr);

                    var td1 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td1);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(sourceText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td1.appendChild(text);

                    var td2 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td2);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(relation);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td2.appendChild(text);

                    var td3 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td3);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(targetText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td3.appendChild(text);

                });
            }

            render(links){
                var arr = ["å®ä½“A","å…³ç³»","å®ä½“B"];
                //åˆ›å»ºæ•°ç»„arrï¼Œç”¨æ¥æ˜¾ç¤ºthçš„æ ‡é¢˜
                var body = document.getElementById(this.container1);
                body.innerHTML = '';
                //æŸ¥æ‰¾bodyç»“ç‚¹
                var table = document.createElement("table");
                table.className = "ax-table";
                table.setAttribute("stripe", "odd");
                //åˆ›å»ºtableç»“ç‚¹
                body.appendChild(table);
                //å‘bodyä¸­æ·»åŠ tableèŠ‚ç‚¹
                var thead = document.createElement("thead");
                //åˆ›å»ºtheadèŠ‚ç‚¹
                table.appendChild(thead);
                //æŠŠtheadèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹
                var trd = document.createElement("tr");
                //åˆ›å»ºtrèŠ‚ç‚¹
                thead.appendChild(trd);
                //å‘theadä¸­æ·»åŠ trèŠ‚ç‚¹
                for(let i = 0;i<arr.length;i++){    //éå†arræ•°ç»„ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡è·å–æ•°ç»„ä¸­çš„å…ƒç´ 
                    var th = document.createElement("th");
                    //åˆ›å»ºthèŠ‚ç‚¹
                    trd.appendChild(th);
                    //å‘trèŠ‚ç‚¹ä¸­æ·»åŠ thèŠ‚ç‚¹
                    var text = document.createTextNode(arr[i]);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    th.appendChild(text);
                    //æŠŠæ–‡æœ¬èŠ‚ç‚¹æ·»åŠ åˆ°thèŠ‚ç‚¹ä¸­
                }
                var tbody = document.createElement("tbody");
                //åˆ›å»ºtbodyèŠ‚ç‚¹
                table.appendChild(tbody);
                //æŠŠtbodyèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹ä¸­
                links.forEach(({ sourceText, relation, targetText}) => {
                    var tr = document.createElement("tr");
                    //åˆ›å»ºtrèŠ‚ç‚¹
                    tbody.appendChild(tr);

                    var td1 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td1);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(sourceText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td1.appendChild(text);

                    var td2 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td2);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(relation);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td2.appendChild(text);

                    var td3 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td3);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(targetText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td3.appendChild(text);

                });


                 //åˆ›å»ºæ•°ç»„arrï¼Œç”¨æ¥æ˜¾ç¤ºthçš„æ ‡é¢˜
                var body = document.getElementById(this.container2);
                body.innerHTML = '';
                //æŸ¥æ‰¾bodyç»“ç‚¹
                var table = document.createElement("table");
                table.className = "ax-table";
                table.setAttribute("stripe", "odd");
                //åˆ›å»ºtableç»“ç‚¹
                body.appendChild(table);
                //å‘bodyä¸­æ·»åŠ tableèŠ‚ç‚¹
                var thead = document.createElement("thead");
                //åˆ›å»ºtheadèŠ‚ç‚¹
                table.appendChild(thead);
                //æŠŠtheadèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹
                var trd = document.createElement("tr");
                //åˆ›å»ºtrèŠ‚ç‚¹
                thead.appendChild(trd);
                //å‘theadä¸­æ·»åŠ trèŠ‚ç‚¹
                for(let i = 0;i<arr.length;i++){    //éå†arræ•°ç»„ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡è·å–æ•°ç»„ä¸­çš„å…ƒç´ 
                    var th = document.createElement("th");
                    //åˆ›å»ºthèŠ‚ç‚¹
                    trd.appendChild(th);
                    //å‘trèŠ‚ç‚¹ä¸­æ·»åŠ thèŠ‚ç‚¹
                    var text = document.createTextNode(arr[i]);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    th.appendChild(text);
                    //æŠŠæ–‡æœ¬èŠ‚ç‚¹æ·»åŠ åˆ°thèŠ‚ç‚¹ä¸­
                }
                var tbody = document.createElement("tbody");
                //åˆ›å»ºtbodyèŠ‚ç‚¹
                table.appendChild(tbody);
                //æŠŠtbodyèŠ‚ç‚¹æ·»åŠ åˆ°tableèŠ‚ç‚¹ä¸­
                links.forEach(({ sourceText, relation, targetText}) => {
                    var tr = document.createElement("tr");
                    //åˆ›å»ºtrèŠ‚ç‚¹
                    tbody.appendChild(tr);

                    var td1 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td1);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(sourceText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td1.appendChild(text);

                    var td2 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td2);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(this.relationshipMapping[relation]);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td2.appendChild(text);

                    var td3 = document.createElement("td");
                    //åˆ›å»ºtdèŠ‚ç‚¹
                    tr.appendChild(td3);
                    //æŠŠtdèŠ‚ç‚¹æ·»åŠ trèŠ‚ç‚¹ä¸­
                    var text = document.createTextNode(targetText);
                    //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
                    td3.appendChild(text);

                });
                this.renderEx();
            }
        }
        class displayGRAPH{
            constructor (container_) {
                this.container = document.getElementById(container_);
            }
            render(data){
                const Graph = ForceGraph3D()(this.container);
                Graph.graphData(data)
                .nodeAutoColorBy('label')
                .nodeLabel(node => `NodeID: ${node.start}<br>Text: ${node.text}<br>Label: ${node.label}<br>Probability: ${node.probability}`)
                .linkLabel(link => `Relation: ${link.relation}<br>Source: ${link.sourceText}<br>Target: ${link.targetText}`)
                .linkAutoColorBy(link => link.sourceLabel)
                .linkOpacity(0.5)
                .width(1500)  // è®¾ç½®å®½åº¦
                .height(835)  // è®¾ç½®é«˜åº¦
                .onEngineStop(() => Graph.zoomToFit(400));
            }
        }
        function paddle() {
            const text = G_text;
                fetch('http://127.0.0.1:888', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: text })
                })
                .then(response => response.json())
                .then(data => {
                    G_graghdata = data;
                    const displayent = new displayENT('entity-recognition-result');
                    displayent.render(text, data.nodes, data.links, data.nodes.map(e => e.label));
                    setSuccessStatus("entity");
                    const displaylink = new displayLINK('link-result','reverse-result');
                    displaylink.render(data.links);
                    setSuccessStatus("link");
                    setSuccessStatus("gragh");
                });
        }

        function torch() {
            const text = document.getElementById('inputText').value;
                fetch('http://127.0.0.1:999', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: text })
                })
                .then(response => response.json())
                .then(data => {
                    let cp = document.getElementById("text-completion-result");
                    cp.innerHTML=text + '<span style="color: #8B0000;">' + data.text + '</span>';
                    G_text = data.all;
                    setSuccessStatus("completion");
                });
        }

        function searchGraph(){
            let searchtool = new searchTOOL('graph-result');
            searchtool.search();
        }

        function process() {
            setLoadingStatus("completion");
            setLoadingStatus("entity");
            setLoadingStatus("link");
            setLoadingStatus("gragh");
            torch();
            paddle();
        }
    </script>
    <script>
        $(document).ready(function() {
            $(".mcd-menu li a").click(function(e) {
                e.preventDefault(); // é˜»æ­¢é»˜è®¤çš„é“¾æ¥ç‚¹å‡»è¡Œä¸º
                // ç§»é™¤æ‰€æœ‰æ¨¡å—çš„activeç±»
                $(".mcd-menu li a").removeClass("active");
                // ä¸ºç‚¹å‡»çš„æ¨¡å—æ·»åŠ activeç±»
                $(this).addClass("active");

                // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
                $(".content-section").removeClass("active");

                // æ ¹æ®ç‚¹å‡»çš„æ¨¡å—æ˜¾ç¤ºå¯¹åº”çš„å†…å®¹åŒºåŸŸ
                if ($(this).find("strong").text() === "è¾“å…¥æ–‡æœ¬") {
                    $("#input-text-content").addClass("active");
                } else if ($(this).find("strong").text() === "å®ä½“è¯†åˆ«") {
                    $("#entity-recognition-content").addClass("active");
                } else if ($(this).find("strong").text() === "å…³ç³»æŠ½å–") {
                    $("#relationship-extraction-content").addClass("active");
                } else if ($(this).find("strong").text() === "çŸ¥è¯†å›¾è°±") {
                    $("#3d-graph-content").addClass("active");
                    G_displaygraph = new displayGRAPH('graph-result');
                    G_displaygraph.render(G_graghdata);
                }
            });
        });
    </script>

</body>
</html>
